var e=Object.assign;import{r as t,c as a,a as s,p as n,b as o,o as i,d as r,e as c,u as l,w as g,f as m,g as u,t as d,h as p,i as f,F as h,j as v}from"./vendor.74dec33f.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const s=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,o)=>{const i=new URL(e,s);if(self[t].moduleMap[i])return a(self[t].moduleMap[i]);const r=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){o(new Error(`Failed to import: ${e}`)),n(c)},onload(){a(self[t].moduleMap[i]),n(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("/pop-image-v2/assets/");const b="pop-image-local-cookie-002",I={darkTheme:!1,tags:[]},y=()=>{let e=localStorage.getItem(b);return(!e||e&&""===e.trim())&&(localStorage.setItem(b,JSON.stringify(I)),e=localStorage.getItem(b)),e=JSON.parse(e||"{}"),e},k=y,F=(t={})=>{let a=y();a=e(e({},a),t),localStorage.setItem(b,JSON.stringify(a||{}))},{tags:x}=k(),w=t({image:null,isImageFetching:!1,tags:x}),L=a((()=>w.tags.join(", "))),T=a((()=>w.image)),M=a((()=>w.isImageFetching));var C={state:s(w),actions:{fetchImage:async(e={})=>{try{if(w.isImageFetching)return void console.log("Already fetching");w.isImageFetching=!0,w.image=null;const t=w.tags.join(","),{url:a=null}=await fetch("https://source.unsplash.com/random"+(t&&""!==t.trim()?`?${t.trim()}`:""));if(!a)return console.log("No image found"),void(w.isImageFetching=!1);const{firstLoad:s=!1}=e;s?(w.image=a,w.isImageFetching=!1):setTimeout((()=>{w.image=a,w.isImageFetching=!1}),2e3)}catch(t){console.dir(t),w.isImageFetching=!1}},updateTags:e=>{const t=e.trim().replace(/\s/g,"").split(",").filter((e=>e&&""!==e.trim()));w.tags=t,F({tags:t})}},getters:{getTagsInTextFormat:L,getImage:T,getIsImageFetching:M}};const N=m("data-v-575a748c");n("data-v-575a748c");const S={class:"textbox tags-input"};o();const j={expose:[],setup(e){const{getters:t,actions:a}=C,{updateTags:s,fetchImage:n}=a,{getTagsInTextFormat:o}=t,m=e=>{s(e.target.value)},u=e=>{n()};return N(((e,t)=>(i(),r("div",S,[c("input",{type:"text",value:l(o),placeholder:"Search tags e.g. sky, night",onChange:m,onKeyup:g(u,["enter"])},null,40,["value","onKeyup"])]))))},__scopeId:"data-v-575a748c"};const _=m("data-v-6b819e86"),O={expose:[],setup(e){const{getters:t,actions:a}=C,{getIsImageFetching:s}=t,{fetchImage:n}=a;return _(((e,t)=>(i(),r("button",{onClick:t[1]||(t[1]=(...e)=>l(n)&&l(n)(...e)),class:"btn refresh-button",disabled:l(s)}," Refresh ",8,["disabled"]))))},__scopeId:"data-v-6b819e86"},R={},U={width:"110",height:"20",viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",class:"loader loader--rings"},$=c("circle",{cx:"15",cy:"15",r:"15"},[c("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),c("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1),J=c("circle",{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"},[c("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),c("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})],-1),q=c("circle",{cx:"105",cy:"15",r:"15"},[c("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),c("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1);R.render=function(e,t){return i(),r("svg",U,[$,J,q])};const B={expose:[],setup(e){k();const t=u(k().darkTheme),a=()=>{(()=>{const e=document.querySelector("body");e.classList.contains("dark")?(e.classList.remove("dark"),F({darkTheme:!1})):(e.classList.add("dark"),F({darkTheme:!0}))})(),t.value=!t.value};return(e,s)=>(i(),r("button",{onClick:a,class:"btn theme-toggle-button"},d(t.value?"Light":"Dark"),1))}};const E={class:"top-bar"},K={class:"side-bar"},A={key:1,class:"loading-placeholder"};v({expose:[],setup(e){const{getters:t,actions:a}=C,{getImage:s,getIsImageFetching:n}=t,{fetchImage:o}=a;return(()=>{const e=document.querySelector("body"),{darkTheme:t=!1}=k();t&&e.classList.add("dark")})(),p((()=>{o({firstLoad:!0})})),(e,t)=>(i(),r(h,null,[c("header",null,[c("div",E,[c(j),c(O)]),c("div",K,[c(B)])]),c("main",null,[l(s)?(i(),r("img",{key:0,src:l(s),alt:"Unsplash random"},null,8,["src"])):f("",!0),l(n)?(i(),r("div",A,[c(R)])):f("",!0)]),c("nav",null,[c(O),c(B)])],64))}}).mount("#app");
